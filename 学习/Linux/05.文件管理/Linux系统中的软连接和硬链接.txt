 LINUX ln硬链接与软链接的区别及在ls命令的表现【转】 2010-10-26 13:17:45
分类：
对于一个文件来说，有唯一的索引接点(inode)与之对应，而对于一个索引接点号，却可以有多个文件名与之对应。因此，在磁盘上的同一个文件可以通过不同的路径去访问该文件。注意在Linux下是一切皆文件的啊，文件夹、新加的硬盘 ...都可以看着文件来处理的啊。
连接有软连接和硬连接(hard link)之分的，软连接(symbolic link)又叫符号连接。符号连接相当于Windows 下的快捷方式。
***************不可以对 文件夹/目录 建立硬连接的，我们通常用的还是软连接比较多。************
eg:
ln -s source dist # 建立软连接
ln source dist # 建立硬连接

它们到底有什么区别呢？上次也好好的看了，好象同文件系统的结构有一定的关系，没怎么太详细的研究下次看明白了再加上。
----------------------

软链接实际上只是一段文字，里面包含着它所指向的文件的名字，系统看到软链接后自动跳到对应的文件位置处进行处理；相反，硬链接为文件开设一个新的目录 项，硬链接与文件原有的名字是平权的，在Linux看来它们是等价的。由于这个原因，硬链接不能连接两个不同文件系统上的文件。

软连接与windows下的快捷方式类似

至于硬连接，举个例子说吧，你把dir1/file1硬连接到dir2/file2, 就是在dir2下建立一个dir1/file1的镜像文件file2，它与file1是占用一样大的空间的，并且改动两者中的一个，另一个也会发生同样的改动.

软连接和硬连接可以这样理解：
硬连接就像一个文件有多个文件名，
软连接就是产生一个新文件(这个文件内容,实际上就是记当要链接原文件路径的信息)，这个文件指向另一个文件的位置，
硬连接必须在同一文件系统中，而软连接可以跨文件系统

硬连接 ：源文件名和链接文件名都指向相同的物理地址，目录不能够有硬连接，文件在磁盘中只有一个复制，可以节省硬盘空间，由于删除文件要在同一个索引节点属于唯 一的连接时才能成功，因此可以防止不必要的误删除软连接（符号连接）用ln -s命令创建文件的符号连接，符号连接是linux特殊文件的一种，作为一个文件，它的资料是它所连接的文件的路径名，类似于硬件方式，******可以 删除原始文件 而连接文件仍然存在。********

本文试图清晰彻底的解释软链接和硬链接文件的区别
一 链接文件
链接有两种方式，软链接和硬链接。
　　1 软链接文件
　　软链接又叫符号链接，这个文件包含了另一个文件的路径名。可以是任意文件或目录，可以链接不同文件系统的文件。
**********链接文件甚至可以链接不存在的文件，这就产生一般称之为"断链"的问题(或曰“现象")，链接文件甚至可以循环链接自己。类似于编程语言中的递归。
　　用ln -s 命令可以生成一个软连接，如下:
　　[root@linux236 test]# ln -s source_file softlink_file
　　在对符号文件进行读或写操作的时候，系统会自动把该操作转换为对源文件的操作，但删除链接文件时，系统仅仅删除链接文件，而不删除源文件本身。
　　2 硬链接文件
　　info ln 命令告诉您，硬链接是已存在文件的另一个名字(A "hard link" is another name for an existing file)，这多少有些令人困惑。硬连接的命令是
　　ln -d existfile newfile
　　硬链接文件有两个限制
　　1)、不允许给目录创建硬链接；
　　2)、只有在同一文件系统中的文件之间才能创建硬链接。
　　***********对硬链接文件进行读写和删除操作时候，结果和软链接相同。但如果我们删除硬链接文件的源文件，硬链接文件仍然存在，而且保留了愿有的内容。
***********这时，系统就“忘记”了它曾经是硬链接文件。而把他当成一个普通文件。
二 两者之间的区别
硬连接指通过索引节点来进行的连接。在Linux的文件系统中，保存在磁盘分区中的文件不管是什么类型都给它分配一个编号，称为索引节点号(Inode Number)。
在Linux中，多个文件名指向同一索引节点是存在的。一般这种连接就是硬连接。*******硬连接的作用是允许一个文件拥有多个有效路径名，这样用户就可以建立硬连接到重要
文件,以防止“误删”的功能。其原因如上所述，因为对应该目录的索引节点有一个以上的连接。只删除一个连接并不影响索引节点本身和其它的连接，只有当最后一个
连接被删除后，文件的数据块及目录的连接才会被释放。也就是说，文件才会被真正删除。
软链接文件有点类似于Windows的快捷方式。它实际上是特殊文件的一种。在符号连接中，文件实际上是一个文本文件，其中包含的有另一文件的位置信息。
三 个人体会
软链接是另一个文件，作用可以理解为一个指针，******作用在这个文件上的操作除了删除都直接转向实际指向文件，由于是一个真实的文件所以占用磁盘空间
硬链接可以认为不是一个文件，它只是实际文件的一个别名，它的作用是防止真实文件被误操作，给一个文件建立硬链接后，他们互为别名，删除其中任意一个，
这样用RM命令只会删除该别名，实际文件并不会被删除。只有链接数为0时，才会删除原始文件。




缺点：
因为链接文件包含有原文件的路径信息，所以当原文件从一个目录下移到其他目录中，再访问链接文件，系统就找不到了，而硬链接就没有这个缺陷，你想怎么移就怎么移；还有它要系统分配额外的空间用于建立新的索引节点和保存原文件的路径。